#!/bin/sh

branch="$(git rev-parse --abbrev-ref HEAD)"

echo "Проверка сборки перед пушем..." >&2
npm run build

if [ $? -ne 0 ]; then
  echo "❌ Ошибка: сборка проекта не прошла. Пуш отменён." >&2
  echo "Проверьте ошибки сборки командой 'npm run build' и исправьте их перед повторной попыткой." >&2
  exit 1
fi

echo "✅ Сборка прошла успешно." >&2
exit 0